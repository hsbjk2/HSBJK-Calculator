<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HSBJK iPhone Style Calculator</title>

<style>
*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Rounded","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1920&q=80') center/cover fixed;
  overflow:hidden;
}

/* Date Time */
.datetime{
  position:fixed;
  top:16px;
  right:18px;
  color:#fff;
  font-size:16px;
  font-weight:700;
  background:rgba(0,0,0,.35);
  padding:10px 14px;
  border-radius:14px;
  backdrop-filter:blur(10px);
  z-index:10;
  transition:transform .25s;
}
.datetime:hover{transform:scale(1.12);}

/* Snow */
#snow{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

/* Calculator */
.calculator{
  width:min(92vw,360px);
  background:rgba(0,0,0,.85);
  border-radius:38px;
  padding:20px;
  box-shadow:0 30px 60px rgba(0,0,0,.7);
  backdrop-filter:blur(14px);
  z-index:2;
  transition:transform .25s;
}
.calculator:hover{transform:scale(1.05);}

/* Display */
.display{
  height:96px;
  color:#fff;
  font-size:clamp(32px,8vw,46px);
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  padding:12px;
  overflow-x:auto;
  position:relative;
  white-space:nowrap;
}
.display::before{
  content:"HSBJK Calculator";
  position:absolute;
  top:14px;
  left:22px;
  font-size:13px;
  color:rgba(255,255,255,.45);
}

/* Buttons */
.buttons{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}

button{
  height:clamp(54px,14vw,66px);
  border-radius:50%;
  border:none;
  font-size:clamp(16px,4.5vw,20px);
  cursor:pointer;
  position:relative;
  overflow:hidden;
  transition:transform .12s,box-shadow .12s,filter .12s;
}

button::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:radial-gradient(circle,rgba(255,255,255,.6),transparent 60%);
  opacity:0;
}

button:hover{
  transform:scale(1.08);
  box-shadow:0 0 18px rgba(255,255,255,.35);
}
button:hover::after{opacity:.35;}
button:active{
  transform:scale(.92);
  filter:brightness(1.35);
}

/* Keyboard press animation */
.key-press{
  transform:scale(.92)!important;
  filter:brightness(1.35);
  box-shadow:0 0 22px rgba(255,255,255,.6);
}
.key-press::after{opacity:.4!important;}

.btn-gray{background:#a5a5a5;color:#000;}
.btn-dark{background:#2c2c2e;color:#fff;}
.btn-orange{background:#ff9f0a;color:#fff;}

.btn-zero{
  grid-column:span 2;
  border-radius:40px;
  text-align:left;
  padding-left:26px;
}

/* Extra small devices */
@media (max-width:360px){
  .calculator{padding:16px;border-radius:32px;}
  .buttons{gap:10px;}
}
</style>
</head>

<body>

<div class="datetime" id="datetime"></div>
<canvas id="snow"></canvas>

<div class="calculator">
  <div id="display" class="display">0</div>

  <div class="buttons">
    <button class="btn-gray" data-key="Escape" onclick="clearDisplay()">AC</button>
    <button class="btn-gray" onclick="toggleSign()">±</button>
    <button class="btn-gray" data-key="%" onclick="percent()">%</button>
    <button class="btn-orange" data-key="/" onclick="appendOperator('/')">÷</button>

    <button class="btn-dark" data-key="7" onclick="appendNumber('7')">7</button>
    <button class="btn-dark" data-key="8" onclick="appendNumber('8')">8</button>
    <button class="btn-dark" data-key="9" onclick="appendNumber('9')">9</button>
    <button class="btn-orange" data-key="*" onclick="appendOperator('*')">×</button>

    <button class="btn-dark" data-key="4" onclick="appendNumber('4')">4</button>
    <button class="btn-dark" data-key="5" onclick="appendNumber('5')">5</button>
    <button class="btn-dark" data-key="6" onclick="appendNumber('6')">6</button>
    <button class="btn-orange" data-key="-" onclick="appendOperator('-')">−</button>

    <button class="btn-dark" data-key="1" onclick="appendNumber('1')">1</button>
    <button class="btn-dark" data-key="2" onclick="appendNumber('2')">2</button>
    <button class="btn-dark" data-key="3" onclick="appendNumber('3')">3</button>
    <button class="btn-orange" data-key="+" onclick="appendOperator('+')">+</button>

    <button class="btn-dark btn-zero" data-key="0" onclick="appendNumber('0')">0</button>
    <button class="btn-dark" data-key="." onclick="appendDot()">.</button>
    <button class="btn-orange" data-key="Enter" onclick="calculate()">=</button>

    <button class="btn-dark" onclick="square()">x²</button>
    <button class="btn-dark" onclick="sqrt()">√</button>
    <button class="btn-dark" onclick="reciprocal()">1/x</button>
    <button class="btn-dark" data-key="Backspace" onclick="backspace()">⌫</button>
  </div>
</div>

<script>
let display=document.getElementById("display");
let current="0";

function updateDisplay(){
  display.textContent=current;
  display.scrollLeft=display.scrollWidth;
}
function appendNumber(n){
  current=current==="0"?n:current+n;
  updateDisplay();
}
function appendOperator(o){
  if(!isNaN(current.slice(-1))){
    current+=o;updateDisplay();
  }
}
function appendDot(){
  let p=current.split(/[-+*/]/).pop();
  if(!p.includes(".")){current+=".";updateDisplay();}
}
function clearDisplay(){current="0";updateDisplay();}
function toggleSign(){try{current=String(eval(current)*-1);}catch{}updateDisplay();}
function percent(){try{current=String(eval(current)/100);}catch{}updateDisplay();}
function square(){try{current=String(eval(current)**2);}catch{}updateDisplay();}
function sqrt(){try{current=String(Math.sqrt(eval(current)));}catch{}updateDisplay();}
function reciprocal(){try{current=String(1/eval(current));}catch{}updateDisplay();}
function backspace(){current=current.length>1?current.slice(0,-1):"0";updateDisplay();}
function calculate(){try{current=String(eval(current));}catch{current="Error";setTimeout(clearDisplay,1000);}updateDisplay();}

/* Keyboard animation */
function animateKey(key){
  const btn=document.querySelector(`button[data-key="${key}"]`);
  if(!btn)return;
  btn.classList.add("key-press");
  setTimeout(()=>btn.classList.remove("key-press"),140);
}

document.addEventListener("keydown",e=>{
  const k=e.key;
  if(!isNaN(k)){appendNumber(k);animateKey(k);}
  else if(["+","-","*","/"].includes(k)){appendOperator(k);animateKey(k);}
  else if(k==="Enter"||k==="="){calculate();animateKey("Enter");}
  else if(k==="Backspace"){backspace();animateKey("Backspace");}
  else if(k==="Escape"){clearDisplay();animateKey("Escape");}
  else if(k==="."){appendDot();animateKey(".");}
  else if(k==="%"){percent();animateKey("%");}
});

/* Date Time */
const dt=document.getElementById("datetime");
setInterval(()=>{
  const n=new Date();
  dt.innerHTML=
    n.toLocaleDateString(undefined,{weekday:"short",day:"2-digit",month:"short",year:"numeric"})+
    "<br>"+n.toLocaleTimeString();
},1000);

/* Snow */
const c=document.getElementById("snow"),ctx=c.getContext("2d");
let w,h,snow;
function resize(){w=c.width=innerWidth;h=c.height=innerHeight;}
function init(){
  snow=[...Array(120)].map(()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3+1,d:Math.random()+.5}));
}
function draw(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="rgba(255,255,255,.8)";
  ctx.beginPath();
  snow.forEach(f=>{
    ctx.moveTo(f.x,f.y);
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    f.y+=f.d*f.d+1;
    if(f.y>h){f.y=-5;f.x=Math.random()*w;}
  });
  ctx.fill();
  requestAnimationFrame(draw);
}
resize();init();draw();
window.onresize=()=>{resize();init();}
</script>

</body>
</html>
